2025-10-21 11:08:21 [main] INFO  Electricity.Management.EIMApp - Starting EIMApp using Java 21.0.8 with PID 26576 (C:\Users\alool\Desktop\Code's\Training_Harri\Electricity_Invoice_Management\target\classes started by alool in C:\Users\alool\Desktop\Code's\Training_Harri\Electricity_Invoice_Management)
2025-10-21 11:08:21 [main] INFO  Electricity.Management.EIMApp - No active profile set, falling back to 1 default profile: "default"
2025-10-21 11:08:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-21 11:08:23 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 253 ms. Found 5 JPA repository interfaces.
2025-10-21 11:08:24 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-10-21 11:08:24 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-21 11:08:24 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-21 11:08:24 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-21 11:08:24 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2542 ms
2025-10-21 11:08:24 [main] DEBUG E.M.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-21 11:08:24 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-21 11:08:24 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-10-21 11:08:24 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-21 11:08:25 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-21 11:08:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-21 11:08:25 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7eebb316
2025-10-21 11:08:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-21 11:08:26 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-21 11:08:26 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-21 11:08:26 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-21 11:08:27 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-21 11:08:27 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-21 11:08:28 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-21 11:08:29 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-21 11:08:29 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-10-21 11:08:30 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: df95a893-8150-4a91-9dc0-b7b2b68cc276

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-10-21 11:08:30 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-10-21 11:08:30 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-10-21 11:08:30 [main] INFO  Electricity.Management.EIMApp - Started EIMApp in 9.932 seconds (process running for 11.241)
2025-10-21 11:08:41 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-21 11:08:41 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-21 11:08:41 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-10-21 11:08:41 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /
2025-10-21 11:08:41 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /
2025-10-21 11:08:42 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /script.js
2025-10-21 11:08:42 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /script.js
2025-10-21 11:08:42 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /style.css
2025-10-21 11:08:42 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /style.css
2025-10-21 11:08:42 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /favicon.ico
2025-10-21 11:08:42 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /favicon.ico
2025-10-21 11:08:54 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /
2025-10-21 11:08:54 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /
2025-10-21 11:08:54 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /style.css
2025-10-21 11:08:54 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /style.css
2025-10-21 11:08:54 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /script.js
2025-10-21 11:08:54 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /script.js
2025-10-21 11:08:54 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /favicon.ico
2025-10-21 11:08:54 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /favicon.ico
2025-10-21 11:09:58 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/auth/login
2025-10-21 11:09:58 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /api/auth/login
2025-10-21 11:09:59 [http-nio-8081-exec-1] INFO  E.Management.service.AuthService - Login attempt for user: customer@example.com
2025-10-21 11:09:59 [http-nio-8081-exec-1] INFO  E.Management.service.AuthService - User customer@example.com logged in successfully with role Customer
2025-10-21 11:09:59 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/invoices/my-invoices
2025-10-21 11:09:59 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:09:59 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: customer@example.com
2025-10-21 11:09:59 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: customer@example.com with role: Customer
2025-10-21 11:09:59 [http-nio-8081-exec-3] INFO  E.Management.service.InvoiceService - Fetching invoices for customer ID: 3
2025-10-21 11:13:34 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/auth/login
2025-10-21 11:13:34 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /api/auth/login
2025-10-21 11:13:34 [http-nio-8081-exec-5] INFO  E.Management.service.AuthService - Login attempt for user: creator@Ramallah-electric.com
2025-10-21 11:13:34 [http-nio-8081-exec-5] INFO  E.Management.service.AuthService - User creator@Ramallah-electric.com logged in successfully with role Invoice_Creator
2025-10-21 11:13:34 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/invoices/my-created
2025-10-21 11:13:34 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:13:34 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: creator@Ramallah-electric.com
2025-10-21 11:13:34 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: creator@Ramallah-electric.com with role: Invoice_Creator
2025-10-21 11:13:34 [http-nio-8081-exec-4] INFO  E.Management.service.InvoiceService - Fetching invoices created by user ID: 2
2025-10-21 11:14:25 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/invoices
2025-10-21 11:14:25 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:14:25 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: creator@Ramallah-electric.com
2025-10-21 11:14:25 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: creator@Ramallah-electric.com with role: Invoice_Creator
2025-10-21 11:14:25 [http-nio-8081-exec-6] INFO  E.Management.service.InvoiceService - Creating invoice for customer ID: 4
2025-10-21 11:14:25 [http-nio-8081-exec-6] ERROR E.M.exception.GlobalExceptionHandler - Resource not found: Customer not found
2025-10-21 11:14:33 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/invoices
2025-10-21 11:14:33 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:14:33 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: creator@Ramallah-electric.com
2025-10-21 11:14:33 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: creator@Ramallah-electric.com with role: Invoice_Creator
2025-10-21 11:14:33 [http-nio-8081-exec-7] INFO  E.Management.service.InvoiceService - Creating invoice for customer ID: 4
2025-10-21 11:14:33 [http-nio-8081-exec-7] ERROR E.M.exception.GlobalExceptionHandler - Resource not found: Customer not found
2025-10-21 11:15:35 [http-nio-8081-exec-8] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/auth/login
2025-10-21 11:15:35 [http-nio-8081-exec-8] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /api/auth/login
2025-10-21 11:15:35 [http-nio-8081-exec-8] INFO  E.Management.service.AuthService - Login attempt for user: mohammad.super@jec.ps
2025-10-21 11:15:35 [http-nio-8081-exec-8] INFO  E.Management.service.AuthService - User mohammad.super@jec.ps logged in successfully with role Super_Creator
2025-10-21 11:15:35 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/invoices/provider
2025-10-21 11:15:35 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:15:35 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: mohammad.super@jec.ps
2025-10-21 11:15:35 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: mohammad.super@jec.ps with role: Super_Creator
2025-10-21 11:15:35 [http-nio-8081-exec-10] INFO  E.Management.service.InvoiceService - Fetching all invoices for provider ID: 1
2025-10-21 11:16:23 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/invoices
2025-10-21 11:16:23 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:16:23 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: mohammad.super@jec.ps
2025-10-21 11:16:23 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: mohammad.super@jec.ps with role: Super_Creator
2025-10-21 11:16:23 [http-nio-8081-exec-1] INFO  E.Management.service.InvoiceService - Creating invoice for customer ID: 3
2025-10-21 11:16:23 [http-nio-8081-exec-1] INFO  E.Management.service.InvoiceService - Audit log created for invoice ID: 23 with action: create
2025-10-21 11:16:23 [http-nio-8081-exec-1] INFO  E.Management.service.InvoiceService - Invoice created successfully with number: INV-1-20251021111623
2025-10-21 11:16:25 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/invoices/provider
2025-10-21 11:16:25 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:16:25 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: mohammad.super@jec.ps
2025-10-21 11:16:25 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: mohammad.super@jec.ps with role: Super_Creator
2025-10-21 11:16:25 [http-nio-8081-exec-3] INFO  E.Management.service.InvoiceService - Fetching all invoices for provider ID: 1
2025-10-21 11:17:09 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: PUT /api/invoices/23
2025-10-21 11:17:09 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:17:09 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: mohammad.super@jec.ps
2025-10-21 11:17:09 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: mohammad.super@jec.ps with role: Super_Creator
2025-10-21 11:17:09 [http-nio-8081-exec-2] INFO  E.Management.service.InvoiceService - Updating invoice ID: 23
2025-10-21 11:17:09 [http-nio-8081-exec-2] INFO  E.Management.service.InvoiceService - Audit log created for invoice ID: 23 with action: update
2025-10-21 11:17:09 [http-nio-8081-exec-2] INFO  E.Management.service.InvoiceService - Invoice updated successfully
2025-10-21 11:17:10 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/invoices/provider
2025-10-21 11:17:10 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:17:10 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: mohammad.super@jec.ps
2025-10-21 11:17:10 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: mohammad.super@jec.ps with role: Super_Creator
2025-10-21 11:17:10 [http-nio-8081-exec-5] INFO  E.Management.service.InvoiceService - Fetching all invoices for provider ID: 1
2025-10-21 11:18:09 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/auth/login
2025-10-21 11:18:09 [http-nio-8081-exec-4] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /api/auth/login
2025-10-21 11:18:09 [http-nio-8081-exec-4] INFO  E.Management.service.AuthService - Login attempt for user: layla.auditor@jec.ps
2025-10-21 11:18:09 [http-nio-8081-exec-4] INFO  E.Management.service.AuthService - User layla.auditor@jec.ps logged in successfully with role Auditor
2025-10-21 11:18:09 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/invoices
2025-10-21 11:18:09 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:18:09 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:18:09 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:18:09 [http-nio-8081-exec-6] INFO  E.Management.service.AuditService - Auditor 10 fetching all invoices
2025-10-21 11:18:35 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/logs
2025-10-21 11:18:35 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:18:35 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:18:35 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:18:35 [http-nio-8081-exec-7] INFO  E.Management.service.AuditService - Auditor 10 fetching all audit logs
2025-10-21 11:19:20 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/pricing-history
2025-10-21 11:19:20 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:19:20 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:19:20 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:19:20 [http-nio-8081-exec-9] INFO  E.Management.service.AuditService - Auditor 10 fetching pricing history
2025-10-21 11:22:24 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/audit/query
2025-10-21 11:22:24 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:22:24 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:22:24 [http-nio-8081-exec-10] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:22:24 [http-nio-8081-exec-10] INFO  E.Management.service.GeminiService - Processing natural language query for auditor 10: show me all coustomer
2025-10-21 11:22:26 [http-nio-8081-exec-10] ERROR E.Management.service.GeminiService - Failed to generate SQL from natural language: 503 Service Unavailable from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent
2025-10-21 11:22:26 [http-nio-8081-exec-10] ERROR E.M.exception.GlobalExceptionHandler - Bad request: Failed to process query: 503 Service Unavailable from POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent
2025-10-21 11:24:20 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-21 11:24:20 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-21 11:24:22 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-21 11:24:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-21 11:24:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-21 11:24:27 [main] INFO  Electricity.Management.EIMApp - Starting EIMApp using Java 21.0.8 with PID 3856 (C:\Users\alool\Desktop\Code's\Training_Harri\Electricity_Invoice_Management\target\classes started by alool in C:\Users\alool\Desktop\Code's\Training_Harri\Electricity_Invoice_Management)
2025-10-21 11:24:27 [main] INFO  Electricity.Management.EIMApp - No active profile set, falling back to 1 default profile: "default"
2025-10-21 11:24:28 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-21 11:24:29 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 169 ms. Found 5 JPA repository interfaces.
2025-10-21 11:24:29 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-10-21 11:24:29 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-21 11:24:29 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-21 11:24:29 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-21 11:24:29 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2106 ms
2025-10-21 11:24:29 [main] DEBUG E.M.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-21 11:24:30 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-21 11:24:30 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-10-21 11:24:30 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-21 11:24:30 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-21 11:24:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-21 11:24:30 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e1fb22c
2025-10-21 11:24:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-21 11:24:30 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-21 11:24:30 [main] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-21 11:24:30 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-21 11:24:32 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-21 11:24:32 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-21 11:24:32 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-21 11:24:33 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-21 11:24:33 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-10-21 11:24:33 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 60b3480b-00e8-4651-a742-a285f4db7859

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-10-21 11:24:34 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-10-21 11:24:34 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-10-21 11:24:34 [main] INFO  Electricity.Management.EIMApp - Started EIMApp in 7.442 seconds (process running for 8.368)
2025-10-21 11:24:39 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-21 11:24:39 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-21 11:24:39 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-10-21 11:24:39 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /
2025-10-21 11:24:39 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /
2025-10-21 11:24:39 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /script.js
2025-10-21 11:24:39 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /style.css
2025-10-21 11:24:39 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /script.js
2025-10-21 11:24:39 [http-nio-8081-exec-3] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /style.css
2025-10-21 11:24:39 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: HEAD /api/audit/invoices
2025-10-21 11:24:39 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:24:39 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /favicon.ico
2025-10-21 11:24:39 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /favicon.ico
2025-10-21 11:24:39 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:24:39 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:24:39 [http-nio-8081-exec-9] INFO  E.Management.service.AuditService - Auditor 10 fetching all invoices
2025-10-21 11:24:40 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/invoices
2025-10-21 11:24:40 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:24:40 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:24:40 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:24:40 [http-nio-8081-exec-5] INFO  E.Management.service.AuditService - Auditor 10 fetching all invoices
2025-10-21 11:24:51 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/audit/query
2025-10-21 11:24:51 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:24:51 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:24:51 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:24:51 [http-nio-8081-exec-2] INFO  E.Management.service.GeminiService - Processing natural language query for auditor 10: show me all coustomer
2025-10-21 11:24:57 [http-nio-8081-exec-2] INFO  E.Management.service.GeminiService - Generated SQL: SELECT
  user_id,
  provider_id,
  name,
  email,
  address,
  phone_number,
  created_at,
  updated_at,
  role
FROM User
WHERE
  provider_id = 1 AND role = 'Customer'
LIMIT 100;
2025-10-21 11:24:58 [http-nio-8081-exec-2] INFO  E.Management.service.GeminiService - Query executed successfully, returned 4 rows
2025-10-21 11:25:29 [http-nio-8081-exec-8] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/logs
2025-10-21 11:25:29 [http-nio-8081-exec-8] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:25:29 [http-nio-8081-exec-8] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:25:29 [http-nio-8081-exec-8] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:25:29 [http-nio-8081-exec-8] INFO  E.Management.service.AuditService - Auditor 10 fetching all audit logs
2025-10-21 11:26:37 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/logs
2025-10-21 11:26:37 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:26:37 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:26:37 [http-nio-8081-exec-1] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:26:37 [http-nio-8081-exec-1] INFO  E.Management.service.AuditService - Auditor 10 fetching all audit logs
2025-10-21 11:33:53 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/pricing-history
2025-10-21 11:33:53 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:33:53 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:33:53 [http-nio-8081-exec-7] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:33:53 [http-nio-8081-exec-7] INFO  E.Management.service.AuditService - Auditor 10 fetching pricing history
2025-10-21 11:34:28 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/logs
2025-10-21 11:34:28 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:34:28 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:34:28 [http-nio-8081-exec-6] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:34:28 [http-nio-8081-exec-6] INFO  E.Management.service.AuditService - Auditor 10 fetching all audit logs
2025-10-21 11:34:40 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/audit/logs
2025-10-21 11:34:40 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:34:40 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: layla.auditor@jec.ps
2025-10-21 11:34:40 [http-nio-8081-exec-9] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: layla.auditor@jec.ps with role: Auditor
2025-10-21 11:34:40 [http-nio-8081-exec-9] INFO  E.Management.service.AuditService - Auditor 10 fetching all audit logs
2025-10-21 11:35:07 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: POST /api/auth/login
2025-10-21 11:35:07 [http-nio-8081-exec-5] DEBUG E.M.security.JwtAuthenticationFilter - No JWT token found in request to: /api/auth/login
2025-10-21 11:35:07 [http-nio-8081-exec-5] INFO  E.Management.service.AuthService - Login attempt for user: customer@example.com
2025-10-21 11:35:07 [http-nio-8081-exec-5] INFO  E.Management.service.AuthService - User customer@example.com logged in successfully with role Customer
2025-10-21 11:35:07 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Processing request: GET /api/invoices/my-invoices
2025-10-21 11:35:07 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - JWT token found in Authorization header
2025-10-21 11:35:07 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Extracted username: customer@example.com
2025-10-21 11:35:07 [http-nio-8081-exec-2] DEBUG E.M.security.JwtAuthenticationFilter - Token validated successfully for user: customer@example.com with role: Customer
2025-10-21 11:35:07 [http-nio-8081-exec-2] INFO  E.Management.service.InvoiceService - Fetching invoices for customer ID: 3
2025-10-21 12:07:05 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=31m4s602ms691µs800ns).
2025-10-21 12:09:57 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-21 12:09:57 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-21 12:09:59 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-21 12:09:59 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-21 12:09:59 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
